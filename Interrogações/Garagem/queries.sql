--select * from Peca where custoUnitario < 10 and codigo like '%98%';
--select matricula from Carro, Reparacao where dataFim like '2010-09-%' and Carro.idCarro = Reparacao.idCarro; --SELECT matricula FROM Carro, Reparacao WHERE Carro.idCarro=Reparacao.idCarro AND strftime('%m', dataFim) = '09' AND strftime('%Y', dataFim) = '2010'; 
--select Cliente.nome from Cliente,Reparacao,ReparacaoPeca,Peca,Carro where Cliente.idCliente = Reparacao.idCliente and Reparacao.idReparacao = ReparacaoPeca.idReparacao and ReparacaoPeca.idPeca = Peca.idPeca and Peca.custoUnitario > 10 and Carro.idCliente = Cliente.idCliente;--SELECT nome FROM Cliente, Carro, Reparacao, ReparacaoPeca, Peca WHERE Cliente.idCliente=Carro.idCliente AND Carro.idCarro=Reparacao.idCarro AND Reparacao.idReparacao=ReparacaoPeca.idReparacao AND ReparacaoPeca.idPeca=Peca.idPeca AND custoUnitario>10 ORDER BY custoUnitario DESC;
--SELECT nome FROM Cliente WHERE idCliente NOT IN (SELECT idCliente FROM Carro); 
--SELECT Carro.matricula, count(*) as NumRepa FROM Carro,Reparacao WHERE (Carro.idCarro=Reparacao.idCarro) GROUP BY Carro.matricula; 
--select matricula, sum(strftime('%d',dataFim)-strftime('%d',dataInicio)) "No de dias" from Carro,Reparacao where Carro.idCarro = Reparacao.idCarro group by matricula;--or using %J instead of %d
--m)
--CREATE VIEW PrecoReparacao1 AS SELECT FuncionarioReparacao.idReparacao AS idReparacao, ifnull(SUM(Especialidade.custoHorario*FuncionarioReparacao.numHoras),0) AS precoFuncionario FROM Especialidade, Funcionario, FuncionarioReparacao WHERE Especialidade.idEspecialidade=Funcionario.idEspecialidade AND Funcionario.idFuncionario=FuncionarioReparacao.idFuncionario GROUP BY FuncionarioReparacao.idReparacao; 
--CREATE VIEW PrecoReparacao2 AS SELECT ReparacaoPeca.idReparacao AS idReparacao, ifnull(SUM(Peca.custoUnitario*ReparacaoPeca.quantidade),0) AS precoPeca FROM ReparacaoPeca, Peca WHERE ReparacaoPeca.idPeca=Peca.idpeca GROUP BY ReparacaoPeca.idReparacao; 
--CREATE VIEW precoReparacao AS SELECT ifnull(idReparacao1,idReparacao2) AS idReparacao, ifnull(precoFuncionario,0) + ifnull(precoPeca,0) AS preco FROM (SELECT PrecoReparacao1.idReparacao AS idReparacao1, PrecoReparacao1.precoFuncionario, PrecoReparacao2.idReparacao AS idReparacao2, PrecoReparacao2.precoPeca FROM PrecoReparacao1 LEFT JOIN PrecoReparacao2 ON PrecoReparacao1.idReparacao = PrecoReparacao2.idReparacao UNION ALL SELECT PrecoReparacao1.idReparacao AS idReparacao1, PrecoReparacao1.precoFuncionario, PrecoReparacao2.idReparacao AS idReparacao2, PrecoReparacao2.precoPeca FROM PrecoReparacao2 LEFT JOIN PrecoReparacao1 ON PrecoReparacao1.idReparacao = PrecoReparacao2.idReparacao WHERE PrecoReparacao1.idReparacao IS NULL); 
--select * from precoReparacao,Reparacao where precoReparacao.idReparacao = Reparacao.idReparacao order by precoReparacao.preco Desc;--SELECT * FROM PrecoReparacao ORDER BY preco DESC LIMIT 3; 
--n)
SELECT C1.nome "Propriet√°rio", C2.nome "Cliente" FROM Cliente C1, Cliente C2, Carro, Reparacao WHERE Reparacao.idCarro=Carro.idCarro AND Carro.idCliente=C1.idCliente AND Reparacao.idCliente=C2.idCliente AND C1.idCliente<>C2.idCliente; 